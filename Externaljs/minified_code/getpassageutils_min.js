const getCorrectWordsFromPassage=(e,t)=>{const r=e.length,o=t.length,s=[];for(let e=0;e<=r;e++)s[e]=new Array(o+1).fill(0);for(let d=1;d<=r;d++)for(let r=1;r<=o;r++)e[d-1]===t[r-1]?s[d][r]=s[d-1][r-1]+1:s[d][r]=Math.max(s[d-1][r],s[d][r-1]);let d=r,c=o;const n=[];for(;d>0&&c>0;)e[d-1]===t[c-1]?(n.unshift(e[d-1]),d--,c--):s[d-1][c]>s[d][c-1]?d--:c--;return n},getCompleteWordDetails=({correctWordsInSequence:e,expectedWords:t,typedWords:r})=>{let o=0,s=0;const d=[],c=[];for(;s<e.length&&o<t.length;){const r=t[o],c=e[s];r===c?(d.push(o),s+=1):t.includes(c)||(s+=1),o+=1}for(o=0,s=0;s<r.length&&o<e.length;){e[o]===r[s]&&(c.push(s),o+=1),s+=1}return{correctWordIndicesFromTypedWords:c,correctWordsIndicesInPassage:d}},getUserResults=({expectedWords:e,typedWords:t})=>{const r=getCorrectWordsFromPassage(e,t),{correctWordIndicesFromTypedWords:o,correctWordsIndicesInPassage:s}=getCompleteWordDetails({correctWordsInSequence:r,expectedWords:e,typedWords:t});let d=e.length,c=t.length,n=s.length;const l=o[o.length-1]||-1;let g=d,a=0;if(n>2){const e=s[n-2],t=s[n-1];Math.abs(t-e)<10?g=d-(t+1):(g=d-(e+1),n-=1,c+=1,s.pop())}else d+=n;-1!==l&&(a=c-(l+1));const W=d+a-(g+n);return{totalErrorCount:W,totalCorrectWords:n,totalTypedWords:c,accuracy:n/(n+W)*100,correctWordIndices:s}};window.getCorrectWordsFromPassage=getCorrectWordsFromPassage,window.getCompleteWordDetails=getCompleteWordDetails,window.getUserResults=getUserResults;