console.log("first");const result=document.getElementById("result"),UserInput=document.getElementById("UserInput"),backspaceSpan=document.getElementById("backspace"),keyStrokeSpan=document.getElementById("keystroke"),contentLengthSpan=document.getElementById("contLength"),mistakesSpan=document.getElementById("mistakes"),typedWordCountSpan=document.getElementById("typedWordCount"),pendingWordSpan=document.getElementById("pendingWordCount"),accuracySpan=document.getElementById("accuracyCount");let secondsRemaining,intervalId,startTime,correct_word=0,accuracyCount=0,typedWordCount=0,remainingWords=0,total_words=0,type_language="",EnglishTextReal="",back_space_count=0,mistakeCount=0,lastValue="",pendingCount=0,incorrectWordsFromTypedWord=0,textToType="",innerLoopIndex=0,location_string="",key_stroke_count=0,timerInterval=null,totalSeconds=0;const totalTimeInSeconds=600,SKIP_CHECK_KEYDOWN={Shift:!0,Alt:!0,CapsLock:!0,Tab:!0,Control:!0,Enter:!0},SPECIAL_CHECK_KEYDOWN={Backspace:!0,Delete:!0};function getc(e,t){selectedlang=e,passageNumber=t,renderNewQuote(e,t)}function clearCountWindow(){keystroke=0,mistakeCount=0,Backspace=0,contLength=0,typedWordCount=0,pendingWordCount=0,accuracyCount=0,backspace=0,back_space_count=0,key_stroke_count=0,lastMatchedCorrectWordIndexFromQuestionPassage=0,lastMatchedCorrectWordIndexFromTypedWords=0,correctWords=0,correct_word=0,wordsCorrectlyTyped=0,expectedWords=0,pendingCount=0,errorCount=0,skippedOrIncorrectWordBetween=0,incorrectWordsFromTypedWord=0,keyStrokeSpan.textContent=0,mistakesSpan.textContent=0,backspaceSpan.textContent=0,contentLengthSpan.textContent=0,typedWordCountSpan.textContent=0,pendingWordSpan.textContent=0,accuracySpan.textContent=0}function startTimer(){if(!timerInterval){let e=600;timerInterval=setInterval((()=>{e--,document.getElementById("countdown").textContent=formatTime(e),e<=0&&(stopTimer(),alert("Time's up!"),compareEnglishPassages())}),1e3)}}function stopTimer(){clearInterval(timerInterval),timerInterval=null}function formatTime(e){return[Math.floor(e/3600),Math.floor(e%3600/60),e%60].map((e=>e<10?"0"+e:e)).join(":")}function findLastSpaceIndex(e){let t=e.length-1;for(;t>=0;){if(" "===e.charAt(t))return t;t-=1}return-1}function handleEnglishKeyDown(e){" "===e.key&&" "===EnglishTextReal.slice(EnglishTextReal.length-1)&&e.preventDefault(),"Backspace"===e.code&&(key_stroke_count-=1,lastValue&&(back_space_count+=1),key_stroke_count<0&&(key_stroke_count=0),keyStrokeSpan.textContent=key_stroke_count,backspaceSpan.textContent=back_space_count)}function handleMarathiKeyDown(e){let t=UserInput.value;const n=" "===e.key,o=!t.length,r=n&&o,a=" "===t.charAt(t.length-1),s=n&&!o&&a;let d=UserInput.selectionStart||0;if(r||s)return void e.preventDefault();const{key:c}=e;let l=c;if(SKIP_CHECK_KEYDOWN[c])return void e.preventDefault();if(SPECIAL_CHECK_KEYDOWN[c]&&(key_stroke_count-=1,l="",EnglishTextReal.length&&(back_space_count+=1),key_stroke_count<0&&(key_stroke_count=0),a&&typedWordCount>0&&(typedWordCount-=1),EnglishTextReal=EnglishTextReal.slice(0,EnglishTextReal.length-1),t=t.slice(0,t.length-1),d>0?d-=1:d=0,keyStrokeSpan.textContent=key_stroke_count,backspaceSpan.textContent=back_space_count),l.length>1)return void e.preventDefault();if(SPECIAL_CHECK_KEYDOWN[c]||(key_stroke_count+=1,keyStrokeSpan.textContent=key_stroke_count),n){const n=t+" ";return UserInput.value=n,UserInput.selectionStart=d+1,EnglishTextReal+=" ",typedWordCount+=1,remainingWords=total_words-typedWordCount,pendingWordSpan.innerText=remainingWords,typedWordCountSpan.textContent=typedWordCount,UserInput.scrollTop=UserInput.scrollHeight,void e.preventDefault()}const u=findLastSpaceIndex(t),p=findLastSpaceIndex(EnglishTextReal);let i="";const y=EnglishTextReal.substring(p+1)+l;EnglishTextReal+=l;const g=convertToMarathiUpdated(y);let C=g;u>0?(i=t.substring(0,u+1),C=i+g):C=g,UserInput.value=C,UserInput.selectionStart=C.length,remainingWords=total_words-typedWordCount,pendingWordSpan.innerText=remainingWords,typedWordCountSpan.textContent=typedWordCount,e.preventDefault()}const compareEnglishPassages=()=>{stopTimer(),document.getElementById("UserInput").disabled=!0;const e=UserInput.value,t=textToType,n=e.split(" "),o=getLongestContinuousSequence(t,e);document.querySelectorAll('[id^="w"]').forEach((e=>{e.style.color="red"})),o.length||(mistakesSpan.textContent=expectedWords.length,accuracySpan.innerText="0%");const{correctWords:r,lastMatchedCorrectWordIndexFromQuestionPassage:a,lastMatchedCorrectWordIndexFromTypedWords:s}=getCorrectWordsHighlighted(o,expectedWords,n);""===n[n.length-1]?incorrectWordsFromTypedWord=n.length-1-(s+1):(incorrectWordsFromTypedWord=n.length-(s+1),typedWordCount+=1);const d=total_words-(a+1),c=expectedWords.length-r-d+incorrectWordsFromTypedWord;window.getUserResults({expectedWords:expectedWords,typedWords:n});typedWordCountSpan.textContent=typedWordCount,mistakesSpan.textContent=c,accuracyCount=100*r/(r+c),accuracyCount=accuracyCount.toFixed(2),accuracySpan.innerText=`${accuracyCount}%`,showResultModal()};UserInput.addEventListener("input",(function(e){if("English"!==selectedlang)return void e.preventDefault();"deleteContentBackward"!==e.inputType&&(key_stroke_count+=1,keyStrokeSpan.textContent=key_stroke_count);const t=UserInput.value;lastValue&&t.length>lastValue.length?" "===t[t.length-1]&&(typedWordCount+=1):lastValue&&t.length<lastValue.length&&" "===lastValue[lastValue.length-1]&&(typedWordCount>0?typedWordCount-=1:typedWordCount=0),remainingWords=total_words-typedWordCount,pendingWordSpan.innerText=remainingWords,lastValue=t,typedWordCountSpan.textContent=typedWordCount})),UserInput.addEventListener("keydown",(e=>{startTimer(),"English"===selectedlang?handleEnglishKeyDown(e):handleMarathiKeyDown(e)}));const renderNewQuote=(e,t)=>{clearCountWindow(),UserInput.value="",UserInput.disabled=!1,stopTimer(),document.getElementById("countdown").textContent="10:00",textToType="Marathi"===e?sentencesArrayMarathi[t-1]:"hindi"===e?sentencesArrayHindi[t-1]:sentencesArrayEnglish[t-1],result.innerHTML="";const n=textToType.split(/\s+/);expectedWords=textToType.split(" ");const o=expectedWords.length;contentLengthSpan.textContent=o,total_words=o;let r=0;for(const e of n){const t=document.createElement("span");t.textContent=e+" ",t.id="w"+r,result.appendChild(t),r++}};